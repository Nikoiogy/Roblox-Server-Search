<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    /* Root Variables */
    :root {
      --primary-color: #3b82f6;
      --primary-hover: #2563eb;
      --background-light: #f8fafc;
      --background-dark: #0f172a;
      --text-light: #334155;
      --text-dark: #e2e8f0;
      --success-light: #dcfce7;
      --success-dark: #166534;
      --error-light: #fee2e2;
      --error-dark: #991b1b;
      --warning-light: #fef3c7;
      --warning-dark: #92400e;
      --card-light: #ffffff;
      --card-dark: #1e293b;
      --border-light: #e2e8f0;
      --border-dark: #334155;
      --shadow-light: 0 4px 6px -1px rgba(15, 23, 42, 0.1), 0 2px 4px -2px rgba(15, 23, 42, 0.05);
      --shadow-dark: 0 4px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
    }

    /* Base Styles */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      overflow-x: hidden;
      width: 400px;
    }

    body {
      width: 400px;
      height: 600px;
      padding: 16px;
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      transition: all 0.3s ease;
      line-height: 1.5;
      overflow-x: hidden;
    }

    body.light-mode {
      background-color: var(--background-light);
      color: var(--text-light);
    }

    body.dark-mode {
      background-color: var(--background-dark);
      color: var(--text-dark);
    }

    /* Theme Toggle */
    .theme-toggle {
      position: absolute;
      top: 16px;
      right: 16px;
      background: none;
      border: none;
      cursor: pointer;
      padding: 8px;
      border-radius: 16px;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      z-index: 10;
    }

    .light-mode .theme-toggle {
      background-color: #f0f2f5;
      color: var(--text-light);
    }

    .dark-mode .theme-toggle {
      background-color: #3d4852;
      color: var(--text-dark);
    }

    .theme-toggle:hover {
      transform: scale(1.1);
    }

    /* Card Styles */
    .info-card {
      border-radius: 16px;
      overflow: hidden;
      margin-bottom: 16px;
      transition: all 0.3s ease;
      max-width: 100%;
    }

    .light-mode .info-card {
      background-color: var(--card-light);
      box-shadow: var(--shadow-light);
    }

    .dark-mode .info-card {
      background-color: var(--card-dark);
      box-shadow: var(--shadow-dark);
    }

    .card-thumbnail {
      width: 100%;
      height: 180px;
      object-fit: cover;
      display: block;
    }

    .card-info {
      padding: 16px;
    }

    .card-title {
      margin: 0;
      font-size: 1.25rem;
      font-weight: 600;
      color: inherit;
      word-break: break-word;
    }

    .card-meta {
      margin-top: 8px;
      font-size: 0.9em;
      opacity: 0.8;
    }

    /* Search Container */
    .search-container {
      margin: 16px 0;
      max-width: 100%;
    }

    .input-wrapper {
      position: relative;
      margin-bottom: 12px;
    }

    input {
      width: 100%;
      padding: 12px 14px;
      border-radius: 12px;
      border: 2px solid transparent;
      font-size: 15px;
      transition: all 0.3s ease;
    }

    .light-mode input {
      background-color: rgba(0, 0, 0, 0.05);
      color: var(--text-light);
    }

    .dark-mode input {
      background-color: rgba(255, 255, 255, 0.1);
      color: var(--text-dark);
    }

    input:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
    }

    /* Progress Bar */
    .progress-container {
      width: 100%;
      height: 4px;
      background-color: rgba(0, 0, 0, 0.1);
      border-radius: 2px;
      margin: 12px 0;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      background-color: var(--primary-color);
      transition: width 0.3s ease;
      width: 0;
    }

    /* Buttons */
    .search-button {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 12px;
      background-color: var(--primary-color);
      color: white;
      font-weight: 600;
      font-size: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .search-button:hover:not(:disabled) {
      background-color: var(--primary-hover);
      transform: scale(1.02);
    }

    .search-button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    /* Results */
    .result {
      margin-top: 16px;
      padding: 16px;
      border-radius: 12px;
      transition: all 0.3s ease;
      max-width: 100%;
      word-wrap: break-word;
    }

    .light-mode .success {
      background-color: var(--success-light);
      color: var(--success-dark);
    }

    .dark-mode .success {
      background-color: rgba(46, 125, 50, 0.2);
      color: #81c784;
    }

    .light-mode .error {
      background-color: var(--error-light);
      color: var(--error-dark);
    }

    .dark-mode .error {
      background-color: rgba(198, 40, 40, 0.2);
      color: #ef5350;
    }

    .light-mode .warning {
      background-color: var(--warning-light);
      color: var(--warning-dark);
    }

    .dark-mode .warning {
      background-color: rgba(239, 108, 0, 0.2);
      color: #ffb74d;
    }

    .verbose {
      margin-top: 12px;
      padding: 12px;
      border-radius: 8px;
      font-size: 0.9em;
      line-height: 1.6;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }

    .light-mode .verbose {
      background-color: rgba(0, 0, 0, 0.05);
    }

    .dark-mode .verbose {
      background-color: rgba(255, 255, 255, 0.1);
    }

    /* Join Button */
    .join-button {
      margin-top: 16px;
    }

    .join-link {
      display: inline-block;
      padding: 12px 24px;
      background-color: var(--primary-color);
      color: white;
      text-decoration: none;
      border-radius: 12px;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .join-link:hover {
      background-color: var(--primary-hover);
      transform: scale(1.02);
    }

    /* Debug Console */
    #debug-console {
      margin-top: 16px;
      padding-top: 16px;
      border-top: 2px solid;
      max-width: 100%;
    }

    .light-mode #debug-console {
      border-color: var(--border-light);
    }

    .dark-mode #debug-console {
      border-color: var(--border-dark);
    }

    .console-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .console-title {
      font-weight: 600;
      font-size: 0.95em;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .debug-log {
      max-height: 200px;
      overflow-y: auto;
      overflow-x: hidden;
      border-radius: 12px;
      padding: 16px;
      font-family: 'JetBrains Mono', 'Fira Code', monospace;
      font-size: 0.85em;
      line-height: 1.6;
      word-wrap: break-word;
      white-space: pre-wrap;
    }

    .light-mode .debug-log {
      background-color: #f1f5f9;
    }

    .dark-mode .debug-log {
      background-color: #161f2e;
    }

    .debug-entry {
      margin: 8px 0;
      padding: 8px 0;
      border-bottom: 1px solid;
      word-break: break-word;
    }

    .light-mode .debug-entry {
      border-color: var(--border-light);
    }

    .dark-mode .debug-entry {
      border-color: var(--border-dark);
    }

    .debug-entry.error { color: #ef4444; }
    .debug-entry.warn { color: #f59e0b; }
    .debug-entry.info { color: #3b82f6; }

    #clearDebug {
      padding: 6px 14px;
      font-size: 0.85em;
      border-radius: 8px;
    }

    /* Status Indicators */
    .status-indicator {
      display: inline-block;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      margin-right: 8px;
    }

    .status-online { background-color: #22c55e; }
    .status-ingame { background-color: #3b82f6; }
    .status-studio { background-color: #f59e0b; }
    .status-offline { background-color: #94a3b8; }

    /* Avatar Image */
    .avatar-image {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      margin-right: 10px;
      vertical-align: middle;
    }

    /* Hide cards by default */
    #gameCard, #userCard {
      display: none;
    }

    /* Scrollbar Styling */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(0, 0, 0, 0.2);
      border-radius: 4px;
    }

    .dark-mode ::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.2);
    }
  </style>
</head>
<body class="light-mode">
  <button class="theme-toggle" id="themeToggle" title="Toggle theme">
    ðŸŒ“
  </button>

  <!-- Game Page Card -->
  <div id="gameCard" class="info-card">
    <img id="gameThumbnail" class="card-thumbnail" alt="Game thumbnail">
    <div class="card-info">
      <h3 id="gameTitle" class="card-title"></h3>
      <div id="gameMeta" class="card-meta"></div>
    </div>
  </div>

  <!-- User Profile Card -->
  <div id="userCard" class="info-card">
    <img id="userAvatar" class="card-thumbnail" alt="User avatar">
    <div class="card-info">
      <h3 id="userName" class="card-title"></h3>
      <div id="userStatus" class="card-meta"></div>
    </div>
  </div>

  <div class="search-container">
    <div class="input-wrapper">
      <input 
        type="text" 
        id="searchInput" 
        placeholder="Enter username or ID" 
        autocomplete="off"
        spellcheck="false"
      >
    </div>
    <div class="progress-container">
      <div class="progress-bar" id="searchProgress"></div>
    </div>
    <button id="searchButton" class="search-button">Search</button>
  </div>

  <div id="result"></div>

  <div id="debug-console">
    <div class="console-header">
      <span class="console-title">Debug Console</span>
      <button id="clearDebug" class="search-button">Clear</button>
    </div>
    <div class="debug-log" id="debugLog"></div>
  </div>

  <script src="popup.js"></script>
</body>
</html>